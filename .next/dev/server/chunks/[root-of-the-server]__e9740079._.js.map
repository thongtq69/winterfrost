{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/bephi/Yourweb/app/api/admin/save-projects/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport path from 'path';\nimport fs from 'fs/promises';\n\ntype Project = {\n  slug: string;\n  title: string;\n  description: string;\n  client: string;\n  year: string;\n  categories: string[];\n  cover: string | null;\n  externalUrl: string;\n  detailUrl: string;\n};\n\nconst dataDir = path.join(process.cwd(), 'data');\n\nconst buildTsFile = (projects: Project[]) => {\n  const header = `export type Project = {\n  slug: string;\n  title: string;\n  description: string;\n  client: string;\n  year: string;\n  categories: string[];\n  cover: string | null;\n  externalUrl: string;\n  detailUrl: string;\n};\n\n`;\n  const body = `export const projects: Project[] = ${JSON.stringify(projects, null, 2)};\\nexport const getProjectBySlug = (slug: string) => projects.find((p) => p.slug === slug);\\n`;\n  return header + body;\n};\n\nexport async function POST(req: Request) {\n  try {\n    const payload = await req.json();\n    const projects = payload?.projects as Project[] | undefined;\n    if (!projects || !Array.isArray(projects)) {\n      return NextResponse.json({ ok: false, message: 'Payload projects không hợp lệ' }, { status: 400 });\n    }\n\n    const jsonPath = path.join(dataDir, 'projects.json');\n    const tsPath = path.join(dataDir, 'projects.ts');\n\n    await fs.writeFile(jsonPath, JSON.stringify({ projects }, null, 2), 'utf8');\n    await fs.writeFile(tsPath, buildTsFile(projects), 'utf8');\n\n    return NextResponse.json({ ok: true });\n  } catch (error) {\n    return NextResponse.json({ ok: false, message: (error as Error).message }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAcA,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAEzC,MAAM,cAAc,CAAC;IACnB,MAAM,SAAS,CAAC;;;;;;;;;;;;AAYlB,CAAC;IACC,MAAM,OAAO,CAAC,mCAAmC,EAAE,KAAK,SAAS,CAAC,UAAU,MAAM,GAAG,6FAA6F,CAAC;IACnL,OAAO,SAAS;AAClB;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,UAAU,MAAM,IAAI,IAAI;QAC9B,MAAM,WAAW,SAAS;QAC1B,IAAI,CAAC,YAAY,CAAC,MAAM,OAAO,CAAC,WAAW;YACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,IAAI;gBAAO,SAAS;YAAgC,GAAG;gBAAE,QAAQ;YAAI;QAClG;QAEA,MAAM,WAAW,4GAAI,CAAC,IAAI,CAAC,SAAS;QACpC,MAAM,SAAS,4GAAI,CAAC,IAAI,CAAC,SAAS;QAElC,MAAM,gIAAE,CAAC,SAAS,CAAC,UAAU,KAAK,SAAS,CAAC;YAAE;QAAS,GAAG,MAAM,IAAI;QACpE,MAAM,gIAAE,CAAC,SAAS,CAAC,QAAQ,YAAY,WAAW;QAElD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;QAAK;IACtC,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAO,SAAS,AAAC,MAAgB,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IAC3F;AACF"}}]
}